(function(e){function t(t){for(var i,a,c=t[0],o=t[1],u=t[2],d=0,m=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],i=!0,c=1;c<r.length;c++){var o=r[c];0!==n[o]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var i={},n={app:0},s=[];function a(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=i,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t),r.d(t,"reAuthentication",(function(){return vt}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("7a23"),n={class:""},s={class:"container"},a={key:0,class:""};function c(e,t,r,c,o,u){var l=Object(i["w"])("Navbar"),d=Object(i["w"])("router-view");return Object(i["r"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(l),Object(i["i"])("section",n,[Object(i["i"])("div",s,[o.loading?(Object(i["r"])(),Object(i["e"])("div",a,"loading...")):Object(i["f"])("",!0),o.loading?Object(i["f"])("",!0):(Object(i["r"])(),Object(i["e"])(d,{key:1}))])])],64)}r("caad"),r("2532");var o=r("cf05"),u=r.n(o),l={class:"navbar-wrapper"},d={class:"container d-flex align-items-center justify-content-between"},m=Object(i["i"])("img",{class:"navbar-logo",src:u.a,alt:"Logo"},null,-1),b={class:"navbar-nav"},p={class:"nav-item"},f=Object(i["i"])("i",{class:"fas fa-home icon"},null,-1),h={class:"nav-item"},j=Object(i["i"])("i",{class:"fas fa-users icon"},null,-1),O={key:0,class:"nav-item"},v=Object(i["i"])("i",{class:"fas fa-user icon"},null,-1),g={key:1,class:"nav-item"},w=Object(i["i"])("i",{class:"fas fa-user icon"},null,-1),y={key:2,class:"nav-item"},q=Object(i["i"])("i",{class:"fas fa-user icon"},null,-1);function k(e,t,r,n,s,a){var c=Object(i["w"])("router-link"),o=Object(i["w"])("ProfileDropdown"),u=Object(i["x"])("click-outside");return Object(i["r"])(),Object(i["e"])("div",l,[Object(i["i"])("nav",{class:["navbar-expand-lg",s.isSticky?"sticky":""]},[Object(i["i"])("div",d,[Object(i["i"])(c,{to:"/"},{default:Object(i["E"])((function(){return[m]})),_:1}),Object(i["i"])("ul",b,[Object(i["i"])("li",p,[Object(i["i"])(c,{class:"nav-link",to:"/"},{default:Object(i["E"])((function(){return[f]})),_:1})]),Object(i["i"])("li",h,[Object(i["i"])(c,{class:"nav-link",to:"/users"},{default:Object(i["E"])((function(){return[j]})),_:1})]),a.isLoggedIn?Object(i["f"])("",!0):(Object(i["r"])(),Object(i["e"])("li",O,[Object(i["i"])(c,{class:"nav-link",to:"/login"},{default:Object(i["E"])((function(){return[v]})),_:1})])),a.isLoggedIn?Object(i["f"])("",!0):(Object(i["r"])(),Object(i["e"])("li",g,[Object(i["i"])(c,{class:"nav-link",to:"/register"},{default:Object(i["E"])((function(){return[w]})),_:1})])),a.isLoggedIn?Object(i["F"])((Object(i["r"])(),Object(i["e"])("li",y,[Object(i["i"])("button",{onClick:t[1]||(t[1]=function(e){return s.showProfileMenu=!s.showProfileMenu}),class:["profile-menu-btn",{active:e.$route.path.includes("/"+a.user.username)}]},[q],2),Object(i["i"])(i["b"],{name:"dropdown"},{default:Object(i["E"])((function(){return[s.showProfileMenu?(Object(i["r"])(),Object(i["e"])(o,{key:0,user:a.user},null,8,["user"])):Object(i["f"])("",!0)]})),_:1})],512)),[[u,a.clickOutsideProfileMenu]]):Object(i["f"])("",!0)])])],2)])}var x={class:"dropdown-menu"},S={class:"d-flex align-items-center text-white word-break-all"},A=Object(i["i"])("div",{class:"py-2 mx-2"},[Object(i["i"])("img",{class:"profile-avatar",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPZQ_Z6Jir7-1quljeW8Nea3KQ3uXEVbtQ6w&usqp=CAU",alt:""})],-1),P={class:""},_={class:"row row-cols-2 text-center"},M=Object(i["i"])("i",{class:"fas fa-user-circle"},null,-1),T=Object(i["i"])("span",{class:"d-block pt-1"},"My Profile",-1),E=Object(i["i"])("i",{class:"fas fa-cogs"},null,-1),U=Object(i["i"])("span",{class:"d-block pt-1"},"Settings",-1),$=Object(i["i"])("i",{class:"fas fa-bell"},null,-1),z=Object(i["i"])("span",{class:"d-block pt-1"},"Notifications",-1),R=Object(i["i"])("i",{class:"fas fa-sign-out-alt"},null,-1),L=Object(i["i"])("span",{class:"d-block pt-1"},"Sign Out",-1);function N(e,t,r,n,s,a){var c=Object(i["w"])("router-link");return Object(i["r"])(),Object(i["e"])("div",x,[Object(i["i"])("div",S,[A,Object(i["i"])("div",P,[Object(i["i"])("span",null,"Hello "+Object(i["z"])(r.user.username),1)])]),Object(i["i"])("div",_,[Object(i["i"])(c,{class:"tile py-4 px-2 border-bottom border-end",to:"/"+r.user.username},{default:Object(i["E"])((function(){return[M,T]})),_:1},8,["to"]),Object(i["i"])(c,{class:"tile py-4 px-2 border-bottom",to:"/"+r.user.username+"/settings"},{default:Object(i["E"])((function(){return[E,U]})),_:1},8,["to"]),Object(i["i"])(c,{class:"tile py-4 px-2 border-end",to:"#"},{default:Object(i["E"])((function(){return[$,z]})),_:1}),Object(i["i"])("div",{class:"tile py-4 px-2 cursor-pointer",onClick:t[1]||(t[1]=function(){return a.logout&&a.logout.apply(a,arguments)})},[R,L])])])}r("96cf");var C=r("1da1"),D={props:{user:Object},data:function(){return{}},methods:{logout:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:e.$router.push({name:"home",params:{redirectMsg:"Successfully logged out!"}});case 3:case"end":return t.stop()}}),t)})))()}}};D.render=N;var V=D,I={components:{ProfileDropdown:V},data:function(){return{showProfileMenu:!1,isSticky:!1}},created:function(){window.addEventListener("scroll",this.handleScroll)},unmounted:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){pageYOffset>200?this.isSticky=!0:this.isSticky=!1},clickOutsideProfileMenu:function(){this.showProfileMenu=!1}},watch:{$route:function(){this.showProfileMenu=!1}},computed:{isLoggedIn:function(){return this.$store.getters["user/isAuthenticated"]},user:function(){return this.$store.getters["user/user"]}}};I.render=k;var F=I,Q={components:{Navbar:F},data:function(){return{loading:!0}},created:function(){var e=this;console.log("App mounted"),vt.then((function(){return e.loading=!1}))},methods:{}};Q.render=c;var H=Q,J=r("6c02"),G={key:0,class:"text-success"},B=Object(i["g"])('<div class="row"><div class="col"><div class="card"><div class="card-header"><h4>Card header</h4></div><div class="card-body"><h1>h1 text</h1><h2>h2 text</h2><h3>h3 text</h3><h4>h4 text</h4><h5>h5 text</h5><h6>h6 text</h6><h1 class="display-1">Display 1</h1><h1 class="display-2">Display 2</h1><h1 class="display-3">Display 3</h1><h1 class="display-4">Display 4</h1><p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Autem corrupti, rerum soluta optio eveniet ad magni quae totam qui. Nemo eligendi est magnam ut veritatis amet dolores minima dolorem beatae. </p></div></div></div></div>',1);function Y(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])(i["a"],null,[r.redirectMsg?(Object(i["r"])(),Object(i["e"])("h2",G,Object(i["z"])(r.redirectMsg),1)):Object(i["f"])("",!0),Object(i["i"])("p",null,Object(i["z"])(a.states.token?a.states.token:"access token is literally nothing"),1),Object(i["i"])("p",null,Object(i["z"])(a.states.user?a.states.user:"user is literally nothing"),1),Object(i["i"])("p",null,"Am I authenticated: "+Object(i["z"])(!!a.states.isAuthenticated),1),B],64)}var Z={data:function(){return{sharedState:this.$store}},props:{redirectMsg:{}},computed:{states:function(){return{token:this.$store.getters["user/accessToken"],user:this.$store.getters["user/user"],isAuthenticated:this.$store.getters["user/isAuthenticated"]}}}};Z.render=Y;var K=Z;function W(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])("h1",null,"404 Not found! :D")}var X={name:"NotFound"};X.render=W;var ee=X,te=(r("b64b"),{class:"outer"}),re=Object(i["i"])("h1",{class:"caption"},"Register",-1),ie={key:0,class:"text-error"},ne={class:"input"},se=Object(i["i"])("span",{class:"floating-label"},"Username",-1),ae={class:"input"},ce=Object(i["i"])("span",{class:"floating-label"},"Email address",-1),oe={class:"input"},ue=Object(i["i"])("span",{class:"floating-label"},"Password",-1),le={class:"input"},de=Object(i["i"])("span",{class:"floating-label"},"Password again",-1),me=Object(i["i"])("div",{class:""},[Object(i["i"])("button",{type:"submit",class:"btn btn-icon"},[Object(i["h"])("Register"),Object(i["i"])("i",{class:"fas fa-user-plus"})])],-1);function be(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])("form",{onSubmit:t[5]||(t[5]=function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)})},[Object(i["i"])("div",te,[re,s.errors?(Object(i["r"])(),Object(i["e"])("div",ie,[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["v"])(s.errors,(function(e){return Object(i["r"])(),Object(i["e"])("p",{key:e},Object(i["z"])(e.constraints[Object.keys(e.constraints)[0]]),1)})),128))])):Object(i["f"])("",!0),Object(i["i"])("div",ne,[Object(i["F"])(Object(i["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.username=e}),name:"username",type:"text",required:""},null,512),[[i["C"],s.username]]),se]),Object(i["i"])("div",ae,[Object(i["F"])(Object(i["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.email=e}),name:"email",type:"email",required:""},null,512),[[i["C"],s.email]]),ce]),Object(i["i"])("div",oe,[Object(i["F"])(Object(i["i"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.password=e}),name:"password",type:s.type,required:""},null,8,["type"]),[[i["B"],s.password]]),ue,s.passwordVisible?(Object(i["r"])(),Object(i["e"])("i",{key:0,onClick:t[4]||(t[4]=function(){return a.showPassword&&a.showPassword.apply(a,arguments)}),class:[s.passwordIcon,"password-hide"]},null,2)):Object(i["f"])("",!0)]),Object(i["i"])("div",le,[Object(i["i"])("input",{type:s.type,required:""},null,8,["type"]),de]),me])],32)}r("d3b7");var pe={data:function(){return{username:"",email:"",password:"",type:"password",passwordIcon:"fas fa-eye",passwordVisible:!1,errors:null}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),console.log("Form submitted"),fetch("http://localhost:3000/api/auth/register",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,password:this.password})}).then((function(e){return e.json()})).then((function(e){if(!e.success)return t.errors=e;t.$router.push({name:"home",params:{redirectMsg:"Account successfully created!"}})}))},showPassword:function(){"password"===this.type?(this.type="text",this.passwordTooltip="Hide password",this.passwordIcon="fas fa-eye-slash"):(this.type="password",this.passwordTooltip="Show password",this.passwordIcon="fas fa-eye")}},watch:{password:function(e){0!=e.length?this.passwordVisible=!0:this.passwordVisible=!1}}};pe.render=be;var fe=pe,he={key:0,class:"text-error"},je={class:"outer"},Oe=Object(i["i"])("h1",{class:"caption"},"Login",-1),ve={key:0,class:"text-error"},ge={class:"input"},we=Object(i["i"])("span",{class:"floating-label"},"Email address",-1),ye={class:"input"},qe=Object(i["i"])("span",{class:"floating-label"},"Password",-1),ke=Object(i["i"])("div",{class:""},[Object(i["i"])("button",{type:"submit",class:"btn btn-icon"},[Object(i["h"])("Login"),Object(i["i"])("i",{class:"fas fa-sign-in-alt"})])],-1);function xe(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])(i["a"],null,[r.redirectMsg?(Object(i["r"])(),Object(i["e"])("h1",he,Object(i["z"])(r.redirectMsg),1)):Object(i["f"])("",!0),Object(i["i"])("form",{onSubmit:t[3]||(t[3]=function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)})},[Object(i["i"])("div",je,[Oe,s.errors?(Object(i["r"])(),Object(i["e"])("div",ve,[(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["v"])(s.errors,(function(e){return Object(i["r"])(),Object(i["e"])("p",{class:"word-break-all",key:e},Object(i["z"])(e),1)})),128))])):Object(i["f"])("",!0),Object(i["i"])("div",ge,[Object(i["F"])(Object(i["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.email=e}),name:"email",type:"email",required:""},null,512),[[i["C"],s.email]]),we]),Object(i["i"])("div",ye,[Object(i["F"])(Object(i["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.password=e}),name:"password",type:"password",required:""},null,512),[[i["C"],s.password]]),qe]),ke])],32)],64)}var Se={data:function(){return{username:"",email:"",password:"",errors:null}},props:{redirectMsg:{}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),console.log("Login form submitted"),this.$store.dispatch("user/login",{email:this.email,password:this.password}).then((function(e){if(e.error)return t.errors=e;t.$router.push({name:"home",params:{redirectMsg:"Successfully logged in!"}}),console.log("Redirecting to home...")})).catch((function(e){return console.log(e)}))}}};Se.render=xe;var Ae=Se,Pe={class:"card"},_e={key:0,class:""},Me=Object(i["i"])("div",{class:"card-header"},[Object(i["i"])("h4",null,"Simple header")],-1),Te={class:"card-body"},Ee={class:"table-responsive"},Ue={key:0},$e=Object(i["i"])("tr",null,[Object(i["i"])("th",null,"ID"),Object(i["i"])("th",null,"Username"),Object(i["i"])("th",null,"Email"),Object(i["i"])("th",null,"Active?"),Object(i["i"])("th",null,"TokenVersion")],-1),ze=Object(i["i"])("p",null," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Libero dolore aliquid cumque et, modi earum, culpa non deserunt animi omnis laborum facere quae? Quam beatae quos reiciendis cupiditate nemo accusamus, nisi velit magni facilis in et quod alias. Fugit soluta repellat, quae itaque a magni culpa commodi, iste laborum quos laudantium? Fugiat tempora similique tenetur fugit, odit dolores enim atque laudantium repellendus ipsam quae deserunt laborum veritatis porro, minus temporibus est dicta. A architecto qui corrupti magnam nulla recusandae error vitae suscipit ipsam quaerat, optio itaque tempora dicta doloremque voluptates eveniet, eum tenetur quo harum? Mollitia libero aliquid cupiditate blanditiis ut molestiae laborum, officia dicta nostrum ratione quae asperiores distinctio porro est laudantium voluptates alias quisquam. Nostrum, animi dolorem? Est obcaecati ex odio sit consequuntur excepturi sequi! Ducimus velit perferendis ipsam, molestiae illo, sequi voluptas minima reiciendis error harum minus explicabo alias adipisci fugit porro dicta accusantium. Nostrum perspiciatis sapiente voluptatibus distinctio dolore amet. Maxime perspiciatis dolore ducimus, facere perferendis nostrum obcaecati nulla reprehenderit tempore itaque quibusdam minus modi vitae rerum delectus ab provident, est temporibus. Beatae sit quia quam eum obcaecati, aliquid perferendis id quibusdam ipsam aut reprehenderit maxime ipsa alias pariatur minima, veritatis ad mollitia doloremque amet repudiandae labore facere culpa. Ut nam maiores officiis! Consequatur eos earum temporibus odio animi vel enim in mollitia voluptatum cupiditate error cum, ad nisi. Nesciunt laborum reprehenderit consectetur culpa molestiae cumque ex, quis officia dicta, voluptatibus excepturi non quaerat iste tempore numquam quia. Voluptate, iusto nesciunt sed sint, eum libero maxime autem optio quisquam deserunt sequi accusantium reprehenderit odio quis id dolor nobis at. Nulla, magnam! Quis atque qui mollitia rerum ducimus voluptatum cumque architecto sint quibusdam minus quos libero dolore fuga minima ab temporibus iste laboriosam ex, quae deserunt, dolores porro aliquid! Non atque a iure, ullam numquam minima culpa ducimus at? Officia in ducimus, sed nisi, porro beatae alias, laudantium corporis tempore saepe neque nulla similique debitis id deserunt libero aperiam totam numquam. Dolorem saepe cumque recusandae at accusamus veniam repellat dolorum quaerat, expedita explicabo porro ullam nesciunt doloremque non, illo aliquid necessitatibus unde in enim, nemo blanditiis totam ex ut! Quae a at saepe magnam in tempore deleniti fugit enim iure ducimus dolorem molestias doloremque excepturi quam numquam dicta illum dolor facere molestiae, dolores eos officia magni quidem. Sit dolorem voluptatem nemo sapiente, magnam velit assumenda ipsa, aliquid esse, accusamus reprehenderit cumque! Impedit magnam error, quis aliquam itaque iure rerum illo blanditiis fugiat accusantium sed rem, facilis repudiandae ab iusto quae. Voluptate illum qui itaque consectetur ullam rem voluptatem illo molestias minus voluptatum, a nisi dolorem, eaque expedita esse ad maiores alias provident minima sequi! Aliquam eos molestiae delectus ipsum velit illum recusandae nostrum, quos temporibus voluptate veniam cumque odio magnam rerum, omnis voluptatem quasi ipsam odit! Vero sed tenetur provident debitis non nemo earum quasi sint mollitia quaerat placeat inventore illum odio, harum hic alias porro nesciunt laboriosam quibusdam dolores sunt aliquid labore maxime assumenda. Hic magnam harum voluptates. Iusto earum aliquid cumque? Iure, nam aut! Eaque. ",-1);function Re(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])("div",Pe,[s.loading?(Object(i["r"])(),Object(i["e"])("div",_e,"Loading...")):Object(i["f"])("",!0),Me,Object(i["i"])("div",Te,[Object(i["i"])("div",Ee,[s.loading?Object(i["f"])("",!0):(Object(i["r"])(),Object(i["e"])("table",Ue,[$e,(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["v"])(s.users,(function(e){return Object(i["r"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("td",null,Object(i["z"])(e.id),1),Object(i["i"])("td",null,Object(i["z"])(e.username),1),Object(i["i"])("td",null,Object(i["z"])(e.email),1),Object(i["i"])("td",null,Object(i["z"])(e.isActive),1),Object(i["i"])("td",null,Object(i["z"])(e.tokenVersion),1)])})),128))]))])]),ze])}var Le={data:function(){return{loading:!0,users:[],metaTag:null}},created:function(){var e=this;setTimeout((function(){fetch("http://localhost:3000/api/users",{method:"get",credentials:"include",headers:{Authorization:"bearer ".concat(e.$store.state.accessToken)}}).then((function(e){return e.json()})).then((function(t){e.users=t.users,e.loading=!e.loading,console.log(t)})).catch((function(e){return console.log(e.message)}))}),500)}};Le.render=Re;var Ne=Le;function Ce(e,t,r,n,s,a){var c=Object(i["w"])("router-view");return Object(i["r"])(),Object(i["e"])(c)}var De={data:function(){return{}}};De.render=Ce;var Ve=De,Ie={class:"card"},Fe=Object(i["i"])("div",{class:"card-header"},[Object(i["i"])("h1",null,"Account settings")],-1),Qe={class:"card-body"},He={class:"row mb-4"},Je=Object(i["i"])("label",{class:"col-3"},"Username",-1),Ge={class:"col-9"},Be=Object(i["g"])('<div class="row mb-4"><label class="col-3">Change password</label><div class="col-9"><div class="row mb-2"><label class="col-3">Old password</label><div class="col-9"><input type="text" placeholder="Old pw"></div></div><div class="row"><label class="col-3">New password</label><div class="col-9"><input type="text" placeholder="New pw"></div></div></div></div><div class="row mb-4"><label class="col-3"></label><div class="col-9"><button class="btn btn-danger">Deactivate my account</button></div></div><div class="row mb-4"><label class="col-3"></label><div class="col-9"><button class="btn btn-success">Submit changes</button></div></div>',3);function Ye(e,t,r,n,s,a){return Object(i["r"])(),Object(i["e"])("div",Ie,[Fe,Object(i["i"])("div",Qe,[Object(i["i"])("div",He,[Je,Object(i["i"])("div",Ge,[Object(i["i"])("input",{type:"text",value:a.user.username},null,8,["value"])])]),Be])])}var Ze={data:function(){return{}},computed:{isLoggedIn:function(){return this.$store.getters["user/isAuthenticated"]},user:function(){return this.$store.getters["user/user"]}}};Ze.render=Ye;var Ke=Ze,We={key:0},Xe={key:1,class:"text-error"},et={key:2,class:""},tt={key:0},rt=Object(i["i"])("h1",null,"This is your page!",-1);function it(e,t,r,n,s,a){var c,o;return Object(i["r"])(),Object(i["e"])(i["a"],null,[s.loading?(Object(i["r"])(),Object(i["e"])("h1",We,"loading...")):Object(i["f"])("",!0),s.error?(Object(i["r"])(),Object(i["e"])("h1",Xe,"Couldn't find user "+Object(i["z"])(e.$route.params.username)+".",1)):Object(i["f"])("",!0),s.loading||s.error?Object(i["f"])("",!0):(Object(i["r"])(),Object(i["e"])("div",et,[Object(i["i"])("h1",null,"You are viewing "+Object(i["z"])(null===(c=s.user)||void 0===c?void 0:c.username)+"'s profile page.",1),(null===(o=s.user)||void 0===o?void 0:o.username)===e.$store.getters["user/user"].username?(Object(i["r"])(),Object(i["e"])("div",tt,[rt])):Object(i["f"])("",!0),(Object(i["r"])(!0),Object(i["e"])(i["a"],null,Object(i["v"])(s.user,(function(e,t){return Object(i["r"])(),Object(i["e"])("p",{key:t},Object(i["z"])(t)+": "+Object(i["z"])(e),1)})),128))]))],64)}r("b0c0"),r("25f0");var nt={data:function(){return{user:null,loading:!0,error:!1}},mounted:function(){this.fetchUser()},watch:{$route:function(e){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("feed"!==e.name){r.next=3;break}return r.next=3,t.fetchUser();case 3:case"end":return r.stop()}}),r)})))()}},methods:{fetchUser:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:3000/api/users?username="+e.$route.params.username).then((function(e){return e.json()})).then((function(t){return e.loading=!1,t.users[0]?(e.user=t.users[0],e.user.created_at=new Date(e.user.created_at).toString(),e.user.updated_at=new Date(e.user.updated_at).toString(),e.error=!1,t.users[0]):(e.error=!0,null)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}}};nt.render=it;var st=nt,at=r("5502"),ct=r("1232"),ot=function(){return{accessToken:null,user:{}}},ut={isAuthenticated:function(e){return 0!==Object.keys(e.user).length||e.user.constructor!==Object},user:function(e){return e.user},accessToken:function(e){return e.accessToken}},lt={login:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.commit,r.abrupt("return",fetch("http://localhost:3000/api/auth/login",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}).then((function(e){return e.json()})).then((function(e){return e.error||(i("setAccessToken",e.accessToken),i("setUser",Object(ct["a"])(e.accessToken))),e})).catch((function(){return console.log("error in login")})));case 2:case"end":return r.stop()}}),r)})))()},reAuth:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,i=e.state,t.abrupt("return",fetch("http://localhost:3000/api/auth/refresh_token",{method:"post",credentials:"include",headers:{Authorization:"bearer ".concat(i.accessToken)}}).then((function(e){return e.json()})).then((function(e){return e.accessToken?(r("setAccessToken",e.accessToken),r("setUser",Object(ct["a"])(e.accessToken)),Promise.resolve()):Promise.reject("Looks like reauthentication is failed.")})));case 2:case"end":return t.stop()}}),t)})))()},logout:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.abrupt("return",fetch("http://localhost:3000/api/auth/logout",{method:"post",credentials:"include"}).then((function(e){return e.json()})).then((function(){return r("setAccessToken",null),r("setUser",{}),Promise.resolve()})).catch((function(e){return Promise.reject(e)})));case 2:case"end":return t.stop()}}),t)})))()}},dt={setAccessToken:function(e,t){e.accessToken=t},setUser:function(e,t){e.user=t}},mt={namespaced:!0,state:ot,getters:ut,actions:lt,mutations:dt},bt=!1,pt=Object(at["b"])({modules:{user:mt},strict:bt,plugins:bt?[Object(at["a"])()]:[]}),ft={requiresAuth:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.meta.requiresAuth&&!pt.getters["user/isAuthenticated"]?i({name:"login",params:{redirectMsg:"This route requires authentication!"}}):!pt.getters["user/isAuthenticated"]||"login"!==t.name&&"register"!==t.name?i():i({name:"home"});case 1:case"end":return e.stop()}}),e)})));function t(t,r,i){return e.apply(this,arguments)}return t}(),requiresGuest:function(e,t,r){pt.getters["user/isAuthenticated"]?r({name:"home"}):r()},requiresSameUser:function(e,t,r){pt.getters["user/user"].username===e.params.username?r():r({name:"home",params:{redirectMsg:"Not logged in as ".concat(e.params.username)}})}},ht=[{name:"home",path:"/",component:K,props:!0},{name:"login",path:"/login",component:Ae,props:!0,beforeEnter:[ft.requiresGuest]},{name:"register",path:"/register",component:fe,props:!0,beforeEnter:[ft.requiresGuest]},{name:"getUsers",path:"/users",component:Ne,meta:{requiresAuth:!0},beforeEnter:[ft.requiresAuth]},{name:"profile",path:"/:username",component:Ve,meta:{},children:[{path:"settings",component:Ke,beforeEnter:[ft.requiresSameUser]},{name:"feed",path:"",component:st}]},{name:"404",path:"/:pathMatch(.*)*",component:ee}],jt=Object(J["a"])({history:Object(J["b"])(),routes:ht});jt.beforeEach(function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vt;case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(t,r,i){return e.apply(this,arguments)}}());r("b107");var Ot=Object(i["d"])(H).directive("click-outside",{beforeMount:function(e,t){var r=function(r){e.contains(r.target)||e===r.target||t.value(r)};e.__vueClickEventHandler__=r,document.addEventListener("click",r)},unmounted:function(e){document.removeEventListener("click",e.__vueClickEventHandler__)}}).use(pt).use(jt),vt=pt.dispatch("user/reAuth").catch((function(e){return console.log(e)}));Ot.mount("#app")},b107:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.4129892e.js.map